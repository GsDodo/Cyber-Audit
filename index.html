<!doctype html>
<html lang="fr" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Unified Cyber Audit Pack ‚Äî Accueil, ISO 27001, NIS2 & RGPD</title>
  <meta name="description" content="Accueil et √©valuations interactives : ISO/IEC 27001:2022, NIS2 et RGPD, avec Oui/Non, sauvegarde locale et rapports.">
  <link rel="icon" href="logo.png" type="image/png" />
  <!-- ‚úÖ PATCH mobile: couleur barre adresse & iOS webapp -->
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
  <meta name="theme-color" media="(prefers-color-scheme: dark)"  content="#0b1220">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <style>
    :root{
      --bg:#0b1220; --panel:#0f172a; --card:#0f172a; --text:#e2e8f0; --muted:#94a3b8;
      --brand:#5b8def; --accent:#22c55e; --warn:#f59e0b; --danger:#ef4444; --line:#1f2937;
      --shadow:0 10px 28px rgba(2,6,23,.24); --tabh:58px;
    }
    [data-theme="light"]{
      --bg:#ffffff; --panel:#ffffff; --card:#ffffff; --muted:#475569; --text:#0f172a;
      --brand:#3b82f6; --accent:#059669; --warn:#d97706; --danger:#b91c1c; --line:#e5e7eb;
      --shadow:0 8px 20px rgba(15,23,42,.08);
    }
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text)}
    a{color:var(--brand);text-decoration:none}
    .wrap{max-width:1180px;margin:0 auto;padding:0 20px}

    /* HERO */
    .hero{position:relative;overflow:hidden;border-bottom:1px solid var(--line)}
    .hero__banner{
      width:100%;height:200px;display:flex;align-items:center;justify-content:center;
      background:linear-gradient(135deg,#0ea5e9 0%, #2563eb 55%, #1d4ed8 100%);
      color:#fff;font-weight:900;font-size:40px;letter-spacing:1.2px;text-shadow:0 4px 16px rgba(0,0,0,.35);
      position:relative
    }
    .hero__banner:after{
      content:"";position:absolute;inset:0;opacity:.20;mix-blend-mode:screen;
      background:
        radial-gradient(circle at 20% 30%,rgba(255,255,255,.25) 0 3px,transparent 3px) 0 0/40px 40px,
        radial-gradient(circle at 80% 70%,rgba(255,255,255,.25) 0 3px,transparent 3px) 0 0/50px 50px
    }
    .hero__bar{display:flex;gap:18px;align-items:center;justify-content:space-between;padding:14px 0 18px}
    .brand{display:flex;gap:14px;align-items:center}
    .brand img{width:44px;height:44px;border-radius:10px;box-shadow:var(--shadow)}
    .brand__titles h1{margin:0;font-size:22px}
    .brand__titles p{margin:2px 0 0;color:var(--muted);font-size:14px}

    /* ‚¨áÔ∏è bloc logo+titres centr√© sans bouger le toggle */
    .brand {
      margin: 0 auto;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 10px;
    }

    /* TOGGLE */
    .toggle{display:inline-flex;gap:8px;align-items:center}
    .toggle input{appearance:none;width:44px;height:24px;background:var(--line);border-radius:999px;position:relative;cursor:pointer;outline:none}
    .toggle input:before{content:'';position:absolute;top:3px;left:3px;width:18px;height:18px;background:#fff;border-radius:50%;transition:.25s}
    [data-theme="dark"] .toggle input{background:#1f2937}
    .toggle input:checked:before{left:23px}

    /* TABS (collent + l√©ger flou) */
    .tabs-wrap{
      position:sticky;top:0;z-index:10;
      background:linear-gradient(180deg, var(--bg) 85%, transparent);
      backdrop-filter:saturate(1.08) blur(2px)
    }
    .tabs{height:var(--tabh);display:flex;gap:8px;align-items:flex-end;border-bottom:1px solid var(--line)}
    .tab{
      position:relative;top:1px;padding:10px 14px;border-radius:10px 10px 0 0;border:1px solid var(--line);border-bottom:0;
      background:var(--panel);cursor:pointer;color:var(--muted);font-weight:700;display:inline-flex;gap:10px;align-items:center
    }
    .tab.active{color:var(--text);background:linear-gradient(180deg,rgba(91,141,239,.18),transparent)}
    .badge{display:inline-flex;align-items:center;gap:6px;border-radius:999px;padding:2px 8px;background:rgba(91,141,239,.12);color:var(--brand);font-size:12px}
    .meter{display:inline-flex;align-items:center;gap:6px}
    .bar{width:92px;height:6px;background:var(--line);border-radius:6px;overflow:hidden}
    .bar>i{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--brand),#22c55e)}

    /* CONTENT */
    .panel{display:none;padding:16px 0 22px}
    .panel.active{display:block}
    .meta{color:var(--muted);font-size:13px;margin:6px 0 12px}
    .card{border:1px solid var(--line);border-radius:14px;background:var(--card);box-shadow:var(--shadow);padding:18px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
    .lead{font-size:15px;color:var(--muted);margin:8px 0 14px}
    .checklist{list-style:none;padding-left:0;margin:0}
    .checklist li{margin:6px 0;padding-left:26px;position:relative}
    .checklist li:before{content:"‚úî";position:absolute;left:0;color:var(--accent);font-weight:900}

    /* IFRAMES */
    .embed-frame{
      width:100%; min-height: 1400px; border:1px solid var(--line); border-radius:12px; background:var(--panel); box-shadow:var(--shadow); display:block
    }
    .frame-wrap{position:relative}
    .skeleton{
      position:absolute;inset:0;display:flex;flex-direction:column;gap:10px;justify-content:center;align-items:center;
      background:linear-gradient(90deg, rgba(148,163,184,.12), rgba(148,163,184,.06), rgba(148,163,184,.12));
      animation:pulse 1.4s infinite; color:var(--muted); font-weight:600; text-align:center; padding:12px
    }
    @keyframes pulse{0%{opacity:.9}50%{opacity:.6}100%{opacity:.9}}

    /* FOOTER */
    footer{border-top:1px solid var(--line);margin-top:24px}
    .foot{padding:14px 0;color:var(--muted);font-size:14px;display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap}

    /* =======================
       ‚úÖ PATCH MOBILE CSS
       ======================= */

    :root{ --radius:14px; }
    body { -webkit-text-size-adjust: 100%; }
    :focus-visible { outline:2px solid var(--brand); outline-offset:2px; }
    button, .tab, .btn, label.toggle { min-height:44px; }

    /* Typo fluide */
    h1 { font-size: clamp(20px, 2.9vw, 22px); }
    .lead, .meta { font-size: clamp(14px, 3.2vw, 15px); }

    /* Hero compact sur mobile */
    @media (max-width: 480px){
      .hero__banner { height:140px; font-size:28px; }
      .hero__bar { flex-direction:column; gap:10px; }
    }

    /* Grille 1 colonne mobile */
    @media (max-width: 768px){
      .grid { grid-template-columns:1fr; }
      .card { border-radius:var(--radius); }
    }

    /* Onglets scrollables au swipe */
    .tabs {
      overflow-x:auto;
      -webkit-overflow-scrolling:touch;
      scrollbar-width: thin;
    }
    .tabs::-webkit-scrollbar { height:6px; }
    .tabs::-webkit-scrollbar-thumb { background:var(--line); border-radius:6px; }

    /* Compacter un peu les onglets en XS */
    @media (max-width: 480px){
      .tab { padding:10px 12px; gap:8px; }
      .badge { display:none; }
      .meter { display:none; }
    }

    /* Toggle plus confortable */
    .toggle input { width:50px; height:28px; }
    .toggle input:before { width:20px; height:20px; top:4px; left:4px; }
    .toggle input:checked:before { left:26px; }

    /* Iframes plus courtes selon largeur */
    @media (max-width: 768px){
      .embed-frame { min-height:900px; }
    }
    @media (max-width: 480px){
      .embed-frame { min-height:780px; }
    }

    /* Safe-area (iOS notch) */
    .hero__bar,
    footer .foot {
      padding-left:max(20px, env(safe-area-inset-left));
      padding-right:max(20px, env(safe-area-inset-right));
    }

    /* Motion r√©duite */
    @media (prefers-reduced-motion: reduce){
      .skeleton { animation:none; }
    }

    /* Tap highlight iOS */
    a, button, label { -webkit-tap-highlight-color: rgba(0,0,0,0); }
  </style>
</head>
<body>
  <header class="hero">
    <div class="hero__banner" role="img" aria-label="My CyberAudit">My CyberAudit</div>
    <div class="wrap hero__bar">
      <div class="brand">
        <img src="logo.png" alt="Logo UCAP" decoding="async"/>
        <div class="brand__titles">
          <h1 align="center">Unified Cyber Audit Pack</h1>
          <p align="center">Solution d'audit Cybers√©curit√© &amp; RGPD en un</p>
        </div>
      </div>
      <label class="toggle" title="Basculer clair/sombre">
        <span>üåô</span>
        <input id="themeSwitch" type="checkbox" aria-label="Basculer le th√®me clair/sombre"/>
        <span>‚òÄÔ∏è</span>
      </label>
    </div>
  </header>

  <div class="tabs-wrap">
    <div class="wrap">
      <nav class="tabs" role="tablist" aria-label="Normes">
        <button class="tab active" data-tab="home" id="tab-home" role="tab" aria-selected="true" aria-controls="panel-home">üè† Accueil</button>
        <button class="tab" data-tab="iso" id="tab-iso" role="tab" aria-selected="false" aria-controls="panel-iso">
          ISO/IEC 27001
          <span class="badge"><span id="iso-pct">0%</span></span>
          <span class="meter"><span class="bar"><i id="iso-bar"></i></span></span>
        </button>
        <button class="tab" data-tab="nis2" id="tab-nis2" role="tab" aria-selected="false" aria-controls="panel-nis2">
          NIS2
          <span class="badge"><span id="nis2-pct">0%</span></span>
          <span class="meter"><span class="bar"><i id="nis2-bar"></i></span></span>
        </button>
        <button class="tab" data-tab="rgpd" id="tab-rgpd" role="tab" aria-selected="false" aria-controls="panel-rgpd">
          RGPD
          <span class="badge"><span id="rgpd-pct">0%</span></span>
          <span class="meter"><span class="bar"><i id="rgpd-bar"></i></span></span>
        </button>
      </nav>
    </div>
  </div>

  <main class="wrap">
    <section id="panel-home" class="panel active" role="tabpanel" aria-labelledby="tab-home">
      <div class="grid">
        <article class="card">
          <h2>üéØ Objectif de l‚Äôoutil <em>CyberAudit</em></h2>
          <p class="lead">CyberAudit acc√©l√®re vos audits et auto‚Äë√©valuations de s√©curit√© en unifiant <strong>ISO/IEC 27001:2022</strong> (Annexe A, 93 contr√¥les), <strong>NIS2</strong> (13 domaines ENISA) et <strong>RGPD</strong>. Cochez <strong>Oui/Non</strong>, obtenez un <strong>rapport</strong> imprimable/PDF et des exports <strong>CSV/JSON</strong> pour le suivi.</p>
          <ul class="checklist">
            <li>Vision claire de la conformit√© et des √©carts prioritaires</li>
            <li>Rapport synth√©tique exportable pour COMEX/RSSI/DPO</li>
            <li>Alignement direct avec SoA ISO, exigences NIS2 et th√®mes RGPD</li>
            <li>Mode sombre/clair, responsive, donn√©es locales (navigateur)</li>
          </ul>
        </article>

        <article class="card">
          <h2>üîê ISO/IEC 27001:2022 ‚Äî l‚Äôessentiel</h2>
          <p class="lead">ISO 27001 d√©finit l‚ÄôISMS. Son Annexe A propose <strong>93 contr√¥les</strong> en 4 cat√©gories : 5.x organisationnel, 6.x personnes, 7.x physique, 8.x technologique. La <strong>SoA</strong> (Statement of Applicability) liste les contr√¥les retenus et justifie les exclusions.</p>
          <ul class="checklist">
            <li>√âvaluez les 93 contr√¥les via l‚Äôonglet <strong>ISO/IEC 27001</strong></li>
            <li>G√©n√©rez le <strong>rapport ISO</strong> en un clic</li>
            <li>Exportez <strong>CSV</strong>/<strong>JSON</strong> pour votre GRC</li>
          </ul>
        </article>

        <article class="card">
          <h2>üèõÔ∏è NIS2 ‚Äî l‚Äôessentiel</h2>
          <p class="lead">NIS2 renforce la gestion du risque cyber (art. 21) et l‚Äôop√©rationnalise en <strong>13 domaines</strong> (ENISA) : gouvernance, incidents, continuit√©, supply‚Äëchain, crypto, RH, contr√¥le d‚Äôacc√®s, etc.</p>
          <ul class="checklist">
            <li>√âvaluez les 13 domaines via l‚Äôonglet <strong>NIS2</strong></li>
            <li>G√©n√©rez le <strong>rapport NIS2</strong> en un clic</li>
            <li>Exportez <strong>CSV</strong>/<strong>JSON</strong> pour vos registres</li>
          </ul>
        </article>

        <article class="card">
          <h2>üõ°Ô∏è RGPD ‚Äî l‚Äôessentiel</h2>
          <p class="lead">
            Le RGPD impose un cadre strict de protection des donn√©es personnelles :
            transparence, bases l√©gales, droits des personnes, s√©curit√©, DPIA,
            registres, sous‚Äëtraitance et gouvernance. Il renforce la ma√Ætrise du risque
            et la conformit√© op√©rationnelle.
          </p>
          <ul class="checklist">
            <li>√âvaluez les th√®mes RGPD via l‚Äôonglet <strong>RGPD</strong></li>
            <li>G√©n√©rez le <strong>rapport RGPD</strong> en un clic</li>
            <li>Exportez <strong>CSV</strong>/<strong>JSON</strong> pour vos registres et preuves de conformit√©</li>
          </ul>
        </article>
      </div>

      <div class="card" style="margin-top:14px">
        <h2>üß≠ Mode d‚Äôemploi</h2>
        <ol>
          <li>Allez dans <strong>ISO/IEC 27001</strong>, <strong>NIS2</strong> ou <strong>RGPD</strong>, cochez Oui/Non pour chaque √©l√©ment.</li>
          <li>G√©n√©rez la <strong>page de r√©sultats</strong> (imprimable/PDF).</li>
          <li>Exportez <strong>CSV/JSON</strong> pour tracer l‚Äôavancement, alimenter vos KPI et votre SoA.</li>
        </ol>
        <p class="lead">Les pourcentages d‚Äôavancement s‚Äôaffichent directement sur les onglets √† mesure de votre progression.</p>
      </div>

      <div class="card" style="margin-top:14px">
        <h2>üéØ Interpr√©tation recommand√©e des pourcentages</h2>
        <p class="lead">
          Le pourcentage est un <strong>indicateur d‚Äôavancement</strong>, non un verdict juridique.
          La conformit√© r√©elle exige le respect <strong>int√©gral</strong> des exigences applicables, des <strong>preuves</strong> et une
          <strong>gestion du risque</strong>. Utilisez cette lecture pour votre tableau de bord :
        </p>
        <ul class="checklist">
          <li><strong>‚â• 90%</strong> ‚Äî <em>Tr√®s bon niveau</em> : conformit√© forte, quelques √©carts mineurs.</li>
          <li><strong>80‚Äì89%</strong> ‚Äî <em>Niveau correct</em> : √©carts mod√©r√©s √† combler rapidement.</li>
          <li><strong>60‚Äì79%</strong> ‚Äî <em>Insuffisant</em> : risque r√©el sur certaines exigences cl√©s.</li>
          <li><strong>&lt; 60%</strong> ‚Äî <em>Non conforme</em> : programme de conformit√© √† revoir.</li>
        </ul>
        <p class="lead" style="margin-top:10px">
          <strong>Important :</strong> m√™me avec 95%, un seul contr√¥le <em>critique</em> en ¬´ Non ¬ª peut bloquer la conformit√©.
        </p>
      </div>
    </section>

    <section id="panel-iso" class="panel" role="tabpanel" aria-labelledby="tab-iso">
      <p class="meta"><strong>ISO/IEC 27001:2022 ‚Äî Annexe A (93 contr√¥les)</strong> ‚Ä¢ Si l‚Äôint√©gration ne se charge pas : <a href="iso27001_annexA_93.html" target="_blank" rel="noopener">ouvrir la page directe</a>.</p>
      <div class="frame-wrap">
        <div class="skeleton" id="sk-iso">Chargement de l‚Äô√©valuation ISO/IEC 27001‚Ä¶</div>
        <iframe
          id="frame-iso"
          class="embed-frame"
          src="iso27001_annexA_93.html"
          title="√âvaluation ISO/IEC 27001:2022"
          loading="lazy"
          referrerpolicy="no-referrer"
          sandbox="allow-scripts allow-same-origin"
        ></iframe>
      </div>
    </section>

    <section id="panel-nis2" class="panel" role="tabpanel" aria-labelledby="tab-nis2">
      <p class="meta"><strong>NIS2 ‚Äî √âvaluation (13 domaines ENISA)</strong> ‚Ä¢ Si l‚Äôint√©gration ne se charge pas : <a href="nis2_assessment.html" target="_blank" rel="noopener">ouvrir la page directe</a>.</p>
      <div class="frame-wrap">
        <div class="skeleton" id="sk-nis2">Chargement de l‚Äô√©valuation NIS2‚Ä¶</div>
        <iframe
          id="frame-nis2"
          class="embed-frame"
          src="nis2_assessment.html"
          title="√âvaluation NIS2 (13 domaines ENISA)"
          loading="lazy"
          referrerpolicy="no-referrer"
          sandbox="allow-scripts allow-same-origin"
        ></iframe>
      </div>
    </section>

    <section id="panel-rgpd" class="panel" role="tabpanel" aria-labelledby="tab-rgpd">
      <p class="meta"><strong>RGPD ‚Äî √âvaluation (th√®mes op√©rationnels)</strong> ‚Ä¢ Si l‚Äôint√©gration ne se charge pas : <a href="rgpd_assessment.html" target="_blank" rel="noopener">ouvrir la page directe</a>.</p>
      <div class="frame-wrap">
        <div class="skeleton" id="sk-rgpd">Chargement de l‚Äô√©valuation RGPD‚Ä¶</div>
        <iframe
          id="frame-rgpd"
          class="embed-frame"
          src="rgpd_assessment.html"
          title="√âvaluation RGPD (op√©rationnelle)"
          loading="lazy"
          referrerpolicy="no-referrer"
          sandbox="allow-scripts allow-same-origin"
        ></iframe>
      </div>
    </section>
  </main>

  <footer>
    <div class="wrap foot">
      <div>¬© <span id="y"></span> Unified Cyber Audit Pack</div>
      <div>Mode <strong id="modeLabel">Clair</strong></div>
    </div>
  </footer>

  <script>
    // THEME
    const root = document.documentElement;
    const sw = document.getElementById('themeSwitch');
    const modeLabel = document.getElementById('modeLabel');
    const pref = localStorage.getItem('ucap-theme');
    const applyTheme = (t) => {
      root.setAttribute('data-theme', t);
      modeLabel.textContent = (t === 'dark') ? 'Sombre' : 'Clair';
      if (sw) sw.checked = (t === 'dark');
      localStorage.setItem('ucap-theme', t);
    };
    applyTheme(pref || (matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'));
    sw?.addEventListener('change', () => applyTheme(sw.checked ? 'dark' : 'light'));

    // TABS + ARIA sync + hash routing
    const tabs = [...document.querySelectorAll('.tab[role="tab"]')];
    const panels = [...document.querySelectorAll('.panel[role="tabpanel"]')];
    function showPanel(id) {
      tabs.forEach(t => {
        const isActive = t.dataset.tab === id;
        t.classList.toggle('active', isActive);
        t.setAttribute('aria-selected', String(isActive));
        t.tabIndex = isActive ? 0 : -1;
      });
      panels.forEach(p => p.classList.toggle('active', p.id === 'panel-' + id));
      history.replaceState(null, '', '#' + id);
      const activeTab = document.querySelector(`.tab[data-tab="${id}"]`);
      activeTab?.focus({ preventScroll: true });
    }
    tabs.forEach(t => t.addEventListener('click', () => showPanel(t.dataset.tab)));

    // Nav clavier entre onglets
    document.querySelector('.tabs')?.addEventListener('keydown', (e) => {
      const idx = tabs.findIndex(t => t.classList.contains('active'));
      if (idx < 0) return;
      if (e.key === 'ArrowRight') { e.preventDefault(); const n = (idx + 1) % tabs.length; showPanel(tabs[n].dataset.tab); }
      if (e.key === 'ArrowLeft')  { e.preventDefault(); const p = (idx - 1 + tabs.length) % tabs.length; showPanel(tabs[p].dataset.tab); }
      if (e.key === 'Home')       { e.preventDefault(); showPanel(tabs[0].dataset.tab); }
      if (e.key === 'End')        { e.preventDefault(); showPanel(tabs[tabs.length - 1].dataset.tab); }
    });

    // Hash initial
    const hash = location.hash.replace('#', '');
    if (hash && tabs.some(x => x.dataset.tab === hash)) showPanel(hash);

    // Skeletons + timeouts (fallback si chargement bloqu√©)
    function bindFrameLoading(frameId, skeletonId, timeoutMs = 12000) {
      const frame = document.getElementById(frameId);
      const sk = document.getElementById(skeletonId);
      if (!frame || !sk) return;
      const hide = () => { sk.style.display = 'none'; };
      const to = setTimeout(() => {
        sk.textContent = "‚è±Ô∏è Le chargement semble long. Vous pouvez ouvrir la page directe via le lien ci‚Äëdessus.";
      }, timeoutMs / 2);
      const to2 = setTimeout(() => { hide(); }, timeoutMs);
      frame.addEventListener('load', () => { clearTimeout(to); clearTimeout(to2); hide(); }, { once: true });
    }
    bindFrameLoading('frame-iso', 'sk-iso');
    bindFrameLoading('frame-nis2', 'sk-nis2');
    bindFrameLoading('frame-rgpd', 'sk-rgpd');

    // ‚úÖ PATCH mobile JS: d√©filement horizontal naturel de la barre d‚Äôonglets
    const tabsNav = document.querySelector('.tabs');
    if (tabsNav) {
      tabsNav.addEventListener('wheel', (e) => {
        if (Math.abs(e.deltaY) > Math.abs(e.deltaX)) {
          tabsNav.scrollLeft += e.deltaY;
          e.preventDefault();
        }
      }, { passive: false });
    }

    // ‚úÖ PATCH mobile JS: r√©duire un peu le timeout skeleton en XS
    const isNarrow = matchMedia('(max-width: 480px)').matches;
    if (isNarrow) {
      try {
        bindFrameLoading('frame-iso', 'sk-iso', 9000);
        bindFrameLoading('frame-nis2', 'sk-nis2', 9000);
        bindFrameLoading('frame-rgpd', 'sk-rgpd', 9000);
      } catch(_) {}
    }

    // Year
    document.getElementById('y').textContent = new Date().getFullYear();
  </script>
</body>
</html>
